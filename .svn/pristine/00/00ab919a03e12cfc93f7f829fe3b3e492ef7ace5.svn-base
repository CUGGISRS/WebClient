(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47fb7555"],{"2e9a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("用户管理")]),a("el-breadcrumb-item",[e._v("用户管理")])],1),a("div",{attrs:{id:"toolDiv"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入名称"},model:{value:e.params.name,callback:function(t){e.$set(e.params,"name",t)},expression:"params.name"}}),a("el-button",{attrs:{type:"primary",size:"small",circle:"",icon:"el-icon-search"},on:{click:function(t){return e.getData()}}}),a("el-button",{attrs:{type:"primary",size:"small",circle:"",icon:"el-icon-plus"},on:{click:function(t){return e.addData()}}})],1),a("el-table",{staticStyle:{width:"95%"},attrs:{stripe:"",height:e.tableHeight,data:e.rows}},[a("el-table-column",{attrs:{prop:"name",label:"名称"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名"}}),a("el-table-column",{attrs:{prop:"type",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("el-tag",{attrs:{type:"primary"}},[e._v("管理员")]):e._e(),2==t.row.type?a("el-tag",{attrs:{type:"info"}},[e._v("普通用户")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),a("el-table-column",{attrs:{prop:"contactPerson",label:"联系人"}}),a("el-table-column",{attrs:{prop:"mailbox",label:"邮箱"}}),a("el-table-column",{attrs:{prop:"unitName",label:"单位名称"}}),a("el-table-column",{attrs:{prop:"unitAddress",label:"单位地址"}}),a("el-table-column",{attrs:{prop:"ip",label:"ip地址"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"150"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("el-tag",{attrs:{type:"danger"}},[e._v("禁用")]):e._e(),1==t.row.status?a("el-tag",{attrs:{type:"success"}},[e._v("启用")]):e._e()]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-edit",type:"primary",size:"small",circle:""},on:{click:function(a){return e.editData(t.row)}}}),a("el-button",{attrs:{icon:"el-icon-delete",type:"primary",size:"small",circle:""},on:{click:function(a){return e.delData(t.row.id)}}})]}}])})],1),a("el-pagination",{attrs:{background:"","current-page":e.params.page,"page-sizes":[10,15,20,25,30],"page-size":e.params.limit,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"用户管理详情",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"row",attrs:{"label-width":"100px",rules:e.rules,model:e.row}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.row.name,callback:function(t){e.$set(e.row,"name",t)},expression:"row.name"}})],1),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:e.row.username,callback:function(t){e.$set(e.row,"username",t)},expression:"row.username"}})],1),"edit"!=e.optType?a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:e.row.password,callback:function(t){e.$set(e.row,"password",t)},expression:"row.password"}})],1):e._e(),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.row.type,callback:function(t){e.$set(e.row,"type",t)},expression:"row.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[a("el-input",{model:{value:e.row.phone,callback:function(t){e.$set(e.row,"phone",t)},expression:"row.phone"}})],1),a("el-form-item",{attrs:{label:"联系人",prop:"contactPerson"}},[a("el-input",{model:{value:e.row.contactPerson,callback:function(t){e.$set(e.row,"contactPerson",t)},expression:"row.contactPerson"}})],1),a("el-form-item",{attrs:{label:"邮箱",prop:"mailbox"}},[a("el-input",{model:{value:e.row.mailbox,callback:function(t){e.$set(e.row,"mailbox",t)},expression:"row.mailbox"}})],1),a("el-form-item",{attrs:{label:"单位名称",prop:"unitName"}},[a("el-input",{model:{value:e.row.unitName,callback:function(t){e.$set(e.row,"unitName",t)},expression:"row.unitName"}})],1),a("el-form-item",{attrs:{label:"单位地址",prop:"unitAddress"}},[a("el-input",{model:{value:e.row.unitAddress,callback:function(t){e.$set(e.row,"unitAddress",t)},expression:"row.unitAddress"}})],1),a("el-form-item",{attrs:{label:"ip地址",prop:"ip"}},[a("el-input",{model:{value:e.row.ip,callback:function(t){e.$set(e.row,"ip",t)},expression:"row.ip"}})],1),"edit"==e.optType?a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-select",{attrs:{placeholder:""},model:{value:e.row.status,callback:function(t){e.$set(e.row,"status",t)},expression:"row.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")]),a("el-button",{attrs:{type:"primary"},on:{click:e.closed}},[e._v("关闭")])],1)],1)],1)],1)},l=[],s=a("9f86"),o=a("de25"),i={data:function(){var e=function(e,t,a){null==t||""==t||o["a"].isValidIP(t)?a():a(new Error("ip地址格式不正确!"))};return{tableHeight:0,total:0,params:{page:1,limit:15},rows:[],row:{},dialogVisible:!1,optType:"",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}],ip:[{validator:e,trigger:"blur"}]},typeOptions:[{name:"管理员",value:1},{name:"普通用户",value:2}],statusOptions:[{name:"禁用",value:0},{name:"启用",value:1}]}},created:function(){var e=this;this.getData(),this.setTableHeight(),window.onresize=function(){e.setTableHeight()}},methods:{setTableHeight:function(){var e=document.documentElement.clientHeight||document.body.clientHeight;this.tableHeight=e-198},handleSizeChange:function(e){this.params.limit=e,this.getData()},handleCurrentChange:function(e){this.params.page=e,this.getData()},getData:function(){var e=this;s["a"].getUser(this.params).then((function(t){200==t.status?(e.rows=t.data.rows,e.total=t.data.total):e.$message.error(t.message)}))},delData:function(e){var t=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s["a"].delUser(e).then((function(e){200==e.status?(t.$message({duration:1e3,type:"success",message:"删除成功！"}),t.getData()):t.$message.error(e.message)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},addData:function(){this.dialogVisible=!0,this.optType="add",this.row={}},editData:function(e){this.dialogVisible=!0,this.optType="edit",this.row=e},submit:function(){var e=this;this.$refs.row.validate((function(t){if(!t)return e.$message.error("信息填写不完整或不准确，请检查再提交！"),!1;"add"==e.optType?s["a"].addUser(e.row).then((function(t){200==t.status?(e.$message({duration:1e3,type:"success",message:"添加成功！"}),e.getData(),e.dialogVisible=!1):e.$message.error(t.message)})):"edit"==e.optType&&s["a"].editUser(e.row).then((function(t){200==t.status?(e.$message({duration:1e3,type:"success",message:"修改成功！"}),e.getData(),e.dialogVisible=!1):e.$message.error(t.message)}))}))},closed:function(){this.dialogVisible=!1}}},n=i,u=(a("368b"),a("2877")),c=Object(u["a"])(n,r,l,!1,null,null,null);t["default"]=c.exports},"368b":function(e,t,a){"use strict";a("39c1")},"39c1":function(e,t,a){}}]);
//# sourceMappingURL=chunk-47fb7555.0b7d870d.js.map