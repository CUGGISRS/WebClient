(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79dc2718"],{"649f":function(e,t,n){},be85:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),n("el-breadcrumb-item",[e._v("公益性子系统")]),n("el-breadcrumb-item",[e._v("用户管理")])],1),n("el-card",[n("div",[n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(t){return e.handleBatchRemove()}}},[e._v("批量删除")]),n("el-input",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{size:"small",clearable:"",placeholder:"用户姓名"},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,"name",t)},expression:"listQuery.name"}}),n("el-input",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{size:"small",clearable:"",placeholder:"手机号"},model:{value:e.listQuery.phone,callback:function(t){e.$set(e.listQuery,"phone",t)},expression:"listQuery.phone"}}),n("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"0.5rem"},attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v(" 查询 ")])],1),n("el-table",{attrs:{data:e.rows,border:"",stripe:"",fit:"","highlight-current-row":"","row-style":{height:"5px"},"cell-style":{padding:"5px 0"},height:e.curHeight},on:{"selection-change":e.checkSelect}},[n("el-table-column",{attrs:{type:"selection",width:"40",label:"全选"}}),n("el-table-column",{attrs:{align:"center",label:"序号",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s((e.listQuery.page-1)*e.listQuery.limit+t.$index+1)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"账号",width:"280"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{attrs:{effect:"light",content:t.row.account,placement:"top"}},[n("el-link",{attrs:{type:"primary",underline:!1}},[e._v(e._s(t.row.account)+" ")])],1)]}}])}),n("el-table-column",{attrs:{align:"center",label:"姓名",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"手机号","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.phone)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"注册时间","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.regTime)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:"启用状态","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.status?n("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(n){return e.handleChangeStatus(t.row)}}},[e._v("已禁用")]):n("el-button",{attrs:{type:"success",size:"mini",plain:""},on:{click:function(n){return e.handleChangeStatus(t.row)}}},[e._v("已启用")])]}}])}),n("el-table-column",{attrs:{align:"center",label:"身份","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["后台管理系统"===t.row.targetSystem?n("el-button",{attrs:{plain:"",size:"mini",type:"success"}},[e._v("管理员")]):n("el-button",{attrs:{plain:"",size:"mini",type:"info"}},[e._v("普通用户")])]}}])}),n("el-table-column",{attrs:{align:"center",label:"操作",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(n){return e.reset(t.row)}}},[e._v("重置密码")]),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(n){return e.deleteRow(t.row)}}},[e._v("删除")])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.listQuery.pageNum,"page-sizes":[15,20,25,30],"page-size":e.listQuery.pageRow,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),n("el-dialog",{staticClass:"row-form",attrs:{title:"用户信息",center:"",visible:e.dialogShow,top:"7vh",width:"40%"},on:{close:e.closeDialog,"update:visible":function(t){e.dialogShow=t}}},[n("el-form",{ref:"row",staticClass:"demo-ruleForm",attrs:{model:e.row,"label-width":"100px",rules:e.rules}},[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"基本信息"}},[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"账号:",prop:"account"}},[n("el-input",{attrs:{maxlength:"50",placeholder:"请输入账号"},model:{value:e.row.account,callback:function(t){e.$set(e.row,"account",t)},expression:"row.account"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"姓名:",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.row.name,callback:function(t){e.$set(e.row,"name",t)},expression:"row.name"}})],1)],1)],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"手机号:",prop:"text"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入手机号"},model:{value:e.row.phone,callback:function(t){e.$set(e.row,"phone",t)},expression:"row.phone"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"注册时间:",prop:"remark"}},[n("el-input",{attrs:{clearable:"",placeholder:"请输入注册时间"},model:{value:e.row.regTime,callback:function(t){e.$set(e.row,"regTime",t)},expression:"row.regTime"}})],1)],1)],1)],1)],1),n("span",{staticClass:"t-btn"},[n("el-button",{attrs:{type:"info"},on:{click:function(t){e.dialogShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"success"},on:{click:e.submitRow}},[e._v("提 交")])],1)],1)],1),n("el-dialog",{attrs:{title:"重置密码",center:"",width:"20%",visible:e.dialogResetPwdVisible},on:{"update:visible":function(t){e.dialogResetPwdVisible=t}}},[n("el-form",{ref:"pwdRulesRow",attrs:{model:e.resetRow,rules:e.pwdRules}},[n("el-form-item",{attrs:{prop:"newPwd"}},[n("el-input",{attrs:{clearable:"",maxlength:"15",placeholder:"请输入新密码"},model:{value:e.resetRow.newPwd,callback:function(t){e.$set(e.resetRow,"newPwd",t)},expression:"resetRow.newPwd"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogResetPwdVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.resetPwd}},[e._v("确 定")])],1)],1)],1)},a=[],r=(n("4160"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("96cf"),n("1da1")),s=n("2909"),l=n("a66f"),o={data:function(){return{flag:"add",listLoading:!1,listQuery:{page:1,limit:15,name:"",phone:"",isDeleted:""},maxCode:"",total:0,curHeight:0,ids:[],dialogShow:!1,dialogResetPwdVisible:!1,rows:[],resetRow:{id:"",newPwd:""},newPwd:"",poductList:[],row:{name:"",account:"",phone:"",regTime:"",status:"",isVerify:""},rules:{},pwdRules:{newPwd:[{required:!0,message:"请输入新密码",trigger:"blur"}]}}},created:function(){var e=this;this.getAllList(),this.setTableHeight(),window.onresize=function(){e.setTableHeight()}},methods:{handleChangeStatus:function(e){var t=this,n=1==e.status?0:1,i=new FormData;i.append("id",e.id),i.append("status",n),this.$confirm("是否修改用户状态?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l["a"].updateUserStatus(i).then((function(e){if(200!==e.status)return t.$message.error("服务错误！");t.$message.success("修改成功!"),t.getAllList()}))})).catch((function(){t.$message({type:"info",message:"已取消修改"})}))},getAllList:function(){var e=this;l["a"].getAllUserInfo(this.listQuery).then((function(t){if(200!==t.status)return e.$message.error("获取失败");e.listLoading=!1,e.rows=t.data.rows,e.total=t.data.total}))},handleFilter:function(){this.listQuery.page=1,this.getAllList()},handleSizeChange:function(e){this.listQuery.limit=e,this.getAllList()},checkSelect:function(e){var t=this;e.forEach((function(e){t.ids.push(e.id)})),this.ids=Object(s["a"])(new Set(this.ids))},handleBatchRemove:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.ids.length){t.next=2;break}return t.abrupt("return",e.$message.warning("请先选中要删除的用户信息"));case 2:return t.next=4,e.$confirm("此操作将删除选中用户信息,是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 4:if(n=t.sent,"confirm"===n){t.next=7;break}return t.abrupt("return",e.$message.info("已经取消删除"));case 7:l["a"].delUserList(e.ids).then((function(t){if(200!==t.status)return e.$message.error("删除失败");e.$message.success("删除成功"),e.getAllList()}));case 8:case"end":return t.stop()}}),t)})))()},handleCurrentChange:function(e){this.listQuery.page=e,this.getAllList()},setTableHeight:function(){var e=document.documentElement.clientHeight||document.body.clientHeight;this.curHeight=e-310},addRow:function(){this.listQuery.text="",this.getAllList(),this.row.type=this.listQuery.type,this.dialogShow=!0},editRow:function(e){this.flag="edit",this.row=e,this.dialogShow=!0},reset:function(e){this.resetRow.id=e.id,this.resetRow.newPwd=123456,this.dialogResetPwdVisible=!0},resetPwd:function(){var e=this;this.$refs.pwdRulesRow.validate(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:i=new FormData,i.append("id",e.resetRow.id),i.append("newPwd",e.resetRow.newPwd),l["a"].resetPwd(i).then((function(t){if(200!==t.status)return e.$message.error("重置失败");e.getAllList(),e.$message.success("密码重置成功"),e.dialogResetPwdVisible=!1}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},deleteRow:function(e){var t=this;this.$confirm("此操作将删除一条用户信息, 是否继续?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.listLoading=!0,t.delUserInfo(e)})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},closeDialog:function(){this.row={},this.$refs.row.clearValidate()},submitRow:function(){},editSubmit:function(){},delUserInfo:function(e){var t=this;l["a"].delUserInfo(e.id).then((function(e){if(200!==e.status)return t.$message.error("删除失败");t.getAllList(),t.$message.success("删除成功"),t.dialogShow=!1}))}}},c=o,u=(n("e1c7"),n("2877")),d=Object(u["a"])(c,i,a,!1,null,"13b12209",null);t["default"]=d.exports},e1c7:function(e,t,n){"use strict";var i=n("649f"),a=n.n(i);a.a}}]);
//# sourceMappingURL=chunk-79dc2718.f3c17aea.js.map